/* ============================================================
   Pyra Workspace — Client Portal Styles
   Aesthetic: Dark Luxury, Glass Morphism, Modern CSS (2025-2026)
   ============================================================ */

@layer base, components, utilities;

/* ---- Base Layer ---- */
@layer base {

    :root {
        --bg-primary: #0a0e14;
        --bg-secondary: #111620;
        --bg-tertiary: #181f2e;
        --bg-hover: rgba(255, 255, 255, 0.04);
        --bg-active: rgba(255, 255, 255, 0.07);
        --bg-card: #141a26;
        --bg-glass: rgba(17, 22, 32, 0.85);
        --border-color: rgba(255, 255, 255, 0.06);
        --border-light: rgba(255, 255, 255, 0.09);
        --text-primary: #edf0f7;
        --text-secondary: #8892a8;
        --text-muted: #505c74;
        --accent: #F97316;
        --accent-hover: #FB923C;
        --accent-dim: #EA580C;
        --accent-bg: rgba(249, 115, 22, 0.08);
        --accent-border: rgba(249, 115, 22, 0.25);
        --accent-glow: 0 0 20px rgba(249, 115, 22, 0.15);
        --portal-glass: rgba(17, 22, 32, 0.75);
        --portal-glass-border: rgba(255, 255, 255, 0.08);
        --portal-glass-hover: rgba(255, 255, 255, 0.12);
        --portal-success: #10b981;
        --portal-warning: #f59e0b;
        --portal-danger: #ef4444;
        --portal-info: #3b82f6;
        --radius: 10px;
        --radius-lg: 16px;
        --radius-xl: 20px;
        --shadow: 0 1px 2px rgba(0,0,0,0.3);
        --shadow-md: 0 8px 24px rgba(0,0,0,0.3);
        --shadow-lg: 0 20px 60px rgba(0,0,0,0.5);
        --shadow-glow: 0 0 40px rgba(249, 115, 22, 0.08);
        --transition: 0.18s cubic-bezier(0.4, 0, 0.2, 1);
        --transition-slow: 0.35s cubic-bezier(0.16, 1, 0.3, 1);
        --font-arabic: 'Cairo', 'Noto Sans Arabic', 'Segoe UI', sans-serif;
        --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        --portal-header-height: 64px;
        --portal-sidebar-width: 260px;
    }

    *, *::before, *::after {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    html {
        font-size: 16px;
        -webkit-text-size-adjust: 100%;
    }

    .portal-body {
        font-family: var(--font-arabic), var(--font-sans), sans-serif;
        background: var(--bg-primary);
        color: var(--text-primary);
        min-height: 100vh;
        overflow-x: hidden;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        line-height: 1.6;
    }

    ::selection {
        background: rgba(249, 115, 22, 0.35);
    }

    :focus-visible {
        outline: 2px solid rgba(249, 115, 22, 0.5);
        outline-offset: 2px;
    }

    .portal-sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
    }

}


/* ---- Components Layer ---- */
@layer components {

    /* ========================================
       LOGIN SCREEN
       ======================================== */

    .portal-login-screen {
        position: fixed;
        inset: 0;
        background: var(--bg-primary);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 2000;
        overflow: hidden;

        &::before {
            content: '';
            position: absolute;
            width: 800px;
            height: 800px;
            border-radius: 50%;
            background: radial-gradient(circle, color-mix(in srgb, var(--accent), transparent 92%) 0%, transparent 70%);
            top: -300px;
            right: -200px;
            animation: portalOrb1 12s ease-in-out infinite alternate;
            will-change: transform;
        }

        &::after {
            content: '';
            position: absolute;
            width: 600px;
            height: 600px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(56, 189, 248, 0.04) 0%, transparent 70%);
            bottom: -200px;
            left: -150px;
            animation: portalOrb2 15s ease-in-out infinite alternate;
            will-change: transform;
        }
    }

    /* Particles */
    .portal-particles {
        position: absolute;
        inset: 0;
        overflow: hidden;
        pointer-events: none;
    }

    .p-orb {
        position: absolute;
        border-radius: 50%;
        filter: blur(60px);
        opacity: 0.07;
        will-change: transform;
    }

    .p-orb--1 {
        width: 400px;
        height: 400px;
        background: var(--accent);
        top: 10%;
        left: 20%;
        animation: portalOrbFloat 20s ease-in-out infinite alternate;
    }

    .p-orb--2 {
        width: 300px;
        height: 300px;
        background: #8b5cf6;
        bottom: 20%;
        right: 15%;
        animation: portalOrbFloat 25s ease-in-out infinite alternate-reverse;
    }

    .p-orb--3 {
        width: 250px;
        height: 250px;
        background: #06b6d4;
        top: 60%;
        left: 60%;
        animation: portalOrbFloat 18s ease-in-out infinite alternate;
        animation-delay: -5s;
    }

    .p-dot {
        position: absolute;
        width: 3px;
        height: 3px;
        border-radius: 50%;
        background: var(--accent);
        opacity: 0;
        animation: portalDotFloat linear infinite;
    }

    .p-dot:nth-child(4)  { left: 8%;  animation-duration: 18s; animation-delay: 0s; width: 4px; height: 4px; }
    .p-dot:nth-child(5)  { left: 20%; animation-duration: 22s; animation-delay: -3s; }
    .p-dot:nth-child(6)  { left: 35%; animation-duration: 16s; animation-delay: -7s; width: 5px; height: 5px; }
    .p-dot:nth-child(7)  { left: 50%; animation-duration: 20s; animation-delay: -2s; }
    .p-dot:nth-child(8)  { left: 65%; animation-duration: 24s; animation-delay: -9s; width: 4px; height: 4px; }
    .p-dot:nth-child(9)  { left: 78%; animation-duration: 17s; animation-delay: -5s; }
    .p-dot:nth-child(10) { left: 42%; animation-duration: 21s; animation-delay: -11s; }
    .p-dot:nth-child(11) { left: 88%; animation-duration: 19s; animation-delay: -1s; width: 3px; height: 3px; }
    .p-dot:nth-child(12) { left: 55%; animation-duration: 23s; animation-delay: -6s; width: 2px; height: 2px; }
    .p-dot:nth-child(13) { left: 12%; animation-duration: 26s; animation-delay: -14s; }

    /* Login Card */
    .portal-login-card {
        position: relative;
        z-index: 1;
        width: 420px;
        max-width: calc(100% - 48px);
        background: color-mix(in srgb, var(--bg-secondary), transparent 10%);
        backdrop-filter: blur(24px) saturate(180%);
        -webkit-backdrop-filter: blur(24px) saturate(180%);
        border: 1px solid var(--portal-glass-border);
        border-radius: var(--radius-xl);
        padding: 48px 40px 40px;
        box-shadow:
            var(--shadow-lg),
            var(--shadow-glow),
            inset 0 1px 0 rgba(255, 255, 255, 0.04);
        animation: portalCardIn 0.7s cubic-bezier(0.16, 1, 0.3, 1);
        transition: border-color var(--transition);

        &::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent 10%, var(--accent) 50%, transparent 90%);
            opacity: 0.5;
            border-radius: var(--radius-xl) var(--radius-xl) 0 0;
        }

        &:hover {
            border-color: color-mix(in srgb, var(--accent), transparent 75%);
        }
    }

    /* Brand / Logo */
    .portal-login-brand {
        text-align: center;
        margin-bottom: 36px;
    }

    .portal-login-logo-img {
        max-height: 48px;
        margin-bottom: 12px;
    }

    .portal-login-logo-icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 64px;
        height: 64px;
        margin-bottom: 16px;

        & svg {
            width: 48px;
            height: 48px;
            color: var(--accent);
            filter: drop-shadow(0 0 16px color-mix(in srgb, var(--accent), transparent 60%));
        }
    }

    .portal-login-title {
        font-size: 1.65rem;
        font-weight: 800;
        color: var(--text-primary);
        letter-spacing: -0.02em;
        line-height: 1.2;
    }

    .portal-login-subtitle {
        font-size: 0.95rem;
        color: var(--text-secondary);
        margin-top: 6px;
        font-weight: 400;
    }

    /* Form */
    .portal-login-form {
        display: flex;
        flex-direction: column;
        gap: 4px;
    }

    .portal-form-group {
        margin-bottom: 16px;
    }

    .portal-form-label {
        display: block;
        font-size: 0.8rem;
        font-weight: 600;
        color: var(--text-muted);
        margin-bottom: 8px;
        letter-spacing: 0.03em;
    }

    .portal-input-wrap {
        position: relative;
        display: flex;
        align-items: center;

        &:has(.portal-input:focus) {
            & .portal-input-icon {
                color: var(--accent);
            }
        }
    }

    .portal-input-icon {
        position: absolute;
        right: 14px;
        width: 18px;
        height: 18px;
        color: var(--text-muted);
        pointer-events: none;
        transition: color var(--transition);
        z-index: 1;
    }

    .portal-input {
        width: 100%;
        padding: 13px 44px 13px 14px;
        background: rgba(255, 255, 255, 0.025);
        border: 1px solid var(--border-color);
        border-radius: var(--radius);
        color: var(--text-primary);
        font-size: 0.925rem;
        font-family: var(--font-sans), var(--font-arabic);
        outline: none;
        transition: all var(--transition);
        text-align: left;

        &::placeholder {
            color: var(--text-muted);
            opacity: 0.6;
        }

        &:focus {
            border-color: var(--accent);
            box-shadow:
                0 0 0 3px var(--accent-bg),
                var(--accent-glow);
            background: color-mix(in srgb, var(--accent), transparent 95%);
        }

        &:hover:not(:focus) {
            border-color: var(--border-light);
        }
    }

    .portal-input--password {
        padding-left: 44px;
    }

    /* Password Toggle */
    .portal-password-toggle {
        position: absolute;
        left: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        color: var(--text-muted);
        transition: color var(--transition);
        z-index: 1;

        &:hover {
            color: var(--text-secondary);
        }

        & .portal-toggle-show,
        & .portal-toggle-hide {
            width: 18px;
            height: 18px;
        }

        & .portal-toggle-hide {
            display: none;
        }
    }

    #showPasswordToggle:checked ~ .portal-toggle-show {
        display: none;
    }

    #showPasswordToggle:checked ~ .portal-toggle-hide {
        display: block;
    }

    /* Error Message */
    .portal-login-error {
        min-height: 0;
        overflow: hidden;
        color: var(--portal-danger);
        font-size: 0.85rem;
        text-align: center;
        transition: all 0.3s ease;
        line-height: 1.4;

        &.portal-has-error {
            min-height: 24px;
            padding: 4px 0;
            animation: portalShake 0.5s cubic-bezier(0.36, 0.07, 0.19, 0.97);
        }
    }

    .portal-login-success {
        color: var(--portal-success);
        font-size: 0.85rem;
        text-align: center;
        padding: 8px 0;
    }

    .portal-forgot-desc {
        font-size: 0.85rem;
        color: var(--text-secondary);
        text-align: center;
        margin-bottom: 16px;
        line-height: 1.5;
    }

    /* Login Button */
    .portal-login-btn {
        position: relative;
        width: 100%;
        padding: 14px 24px;
        background: linear-gradient(135deg, var(--accent), var(--accent-dim));
        color: #fff;
        border: none;
        border-radius: var(--radius);
        font-size: 1rem;
        font-weight: 700;
        font-family: var(--font-arabic), var(--font-sans);
        cursor: pointer;
        transition: all var(--transition);
        overflow: hidden;
        margin-top: 4px;
        letter-spacing: -0.01em;
        box-shadow:
            0 2px 12px color-mix(in srgb, var(--accent), transparent 60%),
            inset 0 1px 0 rgba(255, 255, 255, 0.15);

        &:hover:not(:disabled) {
            transform: translateY(-1px);
            box-shadow:
                0 6px 24px color-mix(in srgb, var(--accent), transparent 50%),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        &:active:not(:disabled) {
            transform: translateY(0);
        }

        &::after {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at var(--ripple-x, 50%) var(--ripple-y, 50%), rgba(255,255,255,0.2), transparent 60%);
            opacity: 0;
            transition: opacity 0.4s;
        }

        &:hover::after {
            opacity: 1;
        }

        &:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        &.portal-btn-loading {
            pointer-events: none;

            & .portal-login-btn-text {
                visibility: hidden;
            }

            & .portal-login-btn-loader {
                display: flex;
            }
        }
    }

    .portal-login-btn-loader {
        display: none;
        position: absolute;
        inset: 0;
        align-items: center;
        justify-content: center;
    }

    .portal-spinner-svg {
        width: 24px;
        height: 24px;
        animation: portalSpin 0.8s linear infinite;
    }

    /* Forgot Password Link */
    .portal-forgot-link {
        display: block;
        text-align: center;
        font-size: 0.85rem;
        color: var(--text-secondary);
        text-decoration: none;
        margin-top: 16px;
        transition: color var(--transition);

        &:hover {
            color: var(--accent);
        }
    }

    /* Login Footer */
    .portal-login-footer {
        position: relative;
        z-index: 1;
        margin-top: 32px;
        font-size: 0.75rem;
        color: var(--text-muted);
        text-align: center;

        & strong {
            color: var(--text-secondary);
            font-weight: 600;
        }
    }

    /* ========================================
       APP SHELL
       ======================================== */

    .portal-app {
        min-height: 100vh;
        background: var(--bg-primary);
        color: var(--text-primary);
    }

    /* Top Bar */
    .portal-top-bar {
        position: sticky;
        top: 0;
        z-index: 100;
        background: color-mix(in srgb, var(--bg-secondary), transparent 5%);
        backdrop-filter: blur(16px) saturate(180%);
        -webkit-backdrop-filter: blur(16px) saturate(180%);
        border-bottom: 1px solid var(--border-color);
    }

    .portal-top-bar-inner {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 24px;
        height: var(--portal-header-height);
        max-width: 1400px;
        margin: 0 auto;
    }

    .portal-logo {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .portal-logo-img {
        height: 28px;
    }

    .portal-logo-svg {
        width: 28px;
        height: 28px;
        color: var(--accent);
        filter: drop-shadow(0 0 8px color-mix(in srgb, var(--accent), transparent 60%));
    }

    .portal-logo-text {
        font-size: 1.15rem;
        font-weight: 700;
        color: var(--accent);
        letter-spacing: -0.02em;
    }

    /* Navigation */
    .portal-nav {
        display: flex;
        gap: 4px;
    }

    .portal-nav-btn {
        display: flex;
        align-items: center;
        gap: 8px;
        background: transparent;
        border: none;
        color: var(--text-secondary);
        padding: 8px 16px;
        border-radius: var(--radius);
        cursor: pointer;
        font-family: var(--font-arabic), var(--font-sans);
        font-size: 0.9rem;
        font-weight: 500;
        transition: all var(--transition);
        position: relative;

        & svg, & i {
            width: 18px;
            height: 18px;
        }

        &:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        &.portal-nav-active {
            background: var(--accent-bg);
            color: var(--accent);
        }
    }

    .portal-notif-badge {
        position: absolute;
        top: 2px;
        left: 2px;
        background: var(--portal-danger);
        color: white;
        font-size: 0.65rem;
        font-weight: 700;
        min-width: 18px;
        height: 18px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0 4px;
        animation: portalBadgeBounce 2s ease-in-out infinite;
    }

    /* User Menu */
    .portal-user-menu {
        position: relative;
    }

    .portal-user-trigger {
        display: flex;
        align-items: center;
        gap: 10px;
        background: transparent;
        border: 1px solid transparent;
        border-radius: var(--radius);
        padding: 6px 12px;
        cursor: pointer;
        transition: all var(--transition);
        font-family: var(--font-arabic), var(--font-sans);

        &:hover {
            background: var(--bg-hover);
            border-color: var(--border-color);
        }
    }

    .portal-user-avatar {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--accent-dim), var(--accent));
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.85rem;
        font-weight: 700;
    }

    .portal-user-name {
        font-size: 0.9rem;
        color: var(--text-secondary);
        font-weight: 500;
    }

    .portal-user-chevron {
        width: 16px;
        height: 16px;
        color: var(--text-muted);
        transition: transform var(--transition);
    }

    .portal-user-dropdown {
        position: absolute;
        top: calc(100% + 8px);
        left: 0;
        min-width: 200px;
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-lg);
        padding: 8px;
        box-shadow: var(--shadow-lg);
        opacity: 0;
        visibility: hidden;
        transform: translateY(-8px);
        transition: all var(--transition);
        z-index: 200;

        &.portal-dropdown-open {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
    }

    .portal-dropdown-item {
        display: flex;
        align-items: center;
        gap: 10px;
        width: 100%;
        padding: 10px 14px;
        background: transparent;
        border: none;
        border-radius: var(--radius);
        color: var(--text-secondary);
        font-family: var(--font-arabic), var(--font-sans);
        font-size: 0.9rem;
        cursor: pointer;
        transition: all var(--transition);

        & svg, & i {
            width: 16px;
            height: 16px;
        }

        &:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        &.portal-dropdown-item--danger:hover {
            background: rgba(239, 68, 68, 0.08);
            color: var(--portal-danger);
        }
    }

    .portal-dropdown-sep {
        height: 1px;
        background: var(--border-color);
        margin: 6px 0;
    }

    /* Mobile Toggle */
    .portal-mobile-toggle {
        display: none;
        align-items: center;
        justify-content: center;
        background: transparent;
        border: none;
        color: var(--text-secondary);
        padding: 8px;
        border-radius: var(--radius);
        cursor: pointer;

        & svg, & i {
            width: 24px;
            height: 24px;
        }
    }

    /* Main Content */
    .portal-main {
        max-width: 1200px;
        margin: 0 auto;
        padding: 24px;
        min-height: calc(100vh - var(--portal-header-height));
        animation: portalFadeIn 0.3s ease;
    }

    .portal-loading {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 300px;
    }

    .portal-spinner {
        width: 40px;
        height: 40px;
        border: 3px solid rgba(255, 255, 255, 0.08);
        border-top-color: var(--accent);
        border-radius: 50%;
        animation: portalSpin 0.8s linear infinite;
    }

    /* ========================================
       TOAST NOTIFICATIONS
       ======================================== */

    .portal-toast-container {
        position: fixed;
        bottom: 24px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 9999;
        display: flex;
        flex-direction: column;
        gap: 8px;
        align-items: center;
        pointer-events: none;
    }

    .portal-toast {
        pointer-events: auto;
        padding: 12px 24px;
        border-radius: var(--radius);
        font-size: 0.9rem;
        font-weight: 500;
        font-family: var(--font-arabic), var(--font-sans);
        color: white;
        backdrop-filter: blur(12px);
        box-shadow: var(--shadow-md);
        animation: portalToastIn 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        max-width: 400px;

        &.toast-success {
            background: color-mix(in srgb, var(--portal-success), var(--bg-secondary) 30%);
            border: 1px solid color-mix(in srgb, var(--portal-success), transparent 60%);
        }

        &.toast-error {
            background: color-mix(in srgb, var(--portal-danger), var(--bg-secondary) 30%);
            border: 1px solid color-mix(in srgb, var(--portal-danger), transparent 60%);
        }

        &.toast-info {
            background: color-mix(in srgb, var(--portal-info), var(--bg-secondary) 30%);
            border: 1px solid color-mix(in srgb, var(--portal-info), transparent 60%);
        }

        &.toast-warning {
            background: color-mix(in srgb, var(--portal-warning), var(--bg-secondary) 30%);
            border: 1px solid color-mix(in srgb, var(--portal-warning), transparent 60%);
        }

        &.portal-toast-out {
            animation: portalToastOut 0.3s ease forwards;
        }
    }

    /* ========================================
       MODAL
       ======================================== */

    .portal-modal-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.6);
        backdrop-filter: blur(4px);
        z-index: 5000;
        display: none;
        align-items: center;
        justify-content: center;

        &.portal-modal-open {
            display: flex;
        }
    }

    .portal-modal {
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-xl);
        padding: 32px;
        max-width: 600px;
        width: calc(100% - 48px);
        max-height: 85vh;
        overflow-y: auto;
        box-shadow: var(--shadow-lg);
        animation: portalModalIn 0.35s cubic-bezier(0.16, 1, 0.3, 1);
    }

    /* ========================================
       DASHBOARD — Phase 4
       ======================================== */

    .portal-dashboard {
        animation: portalFadeIn 0.4s ease;
    }

    /* Welcome Card — enhanced with stats strip */
    .portal-welcome-card {
        background: var(--portal-glass);
        backdrop-filter: blur(16px) saturate(160%);
        -webkit-backdrop-filter: blur(16px) saturate(160%);
        border: 1px solid var(--portal-glass-border);
        border-radius: var(--radius-lg);
        padding: 28px 32px;
        margin-bottom: 24px;
        position: relative;
        overflow: hidden;

        &::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--accent), transparent);
            opacity: 0.3;
        }
    }

    .portal-welcome-content {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 24px;
    }

    .portal-welcome-text {
        & h2 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 6px;
            letter-spacing: -0.01em;
        }

        & p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
    }

    .portal-welcome-stats {
        display: flex;
        gap: 32px;
    }

    .portal-welcome-stat {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 4px;
    }

    .portal-welcome-stat-num {
        font-size: 1.75rem;
        font-weight: 800;
        color: var(--accent);
        line-height: 1;
    }

    .portal-welcome-stat-label {
        font-size: 0.75rem;
        color: var(--text-muted);
        font-weight: 500;
    }

    /* Dashboard Grid */
    .portal-dashboard-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 16px;
    }

    /* Dashboard Cards */
    .portal-card {
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-lg);
        padding: 20px;
        transition: all var(--transition);
        animation: portalCardEnter 0.5s cubic-bezier(0.16, 1, 0.3, 1) backwards;
        position: relative;
        display: flex;
        flex-direction: column;

        &.portal-card--clickable {
            cursor: pointer;

            &:hover {
                transform: translateY(-3px);
                border-color: color-mix(in srgb, var(--accent), transparent 70%);
                box-shadow:
                    0 8px 24px rgba(0, 0, 0, 0.25),
                    var(--shadow-glow);
            }
        }

        &.portal-card--warning {
            border-color: color-mix(in srgb, var(--portal-warning), transparent 75%);

            & .portal-card-count {
                color: var(--portal-warning);
            }
        }
    }

    .portal-dashboard-grid .portal-card:nth-child(1) { animation-delay: 0.05s; }
    .portal-dashboard-grid .portal-card:nth-child(2) { animation-delay: 0.1s; }
    .portal-dashboard-grid .portal-card:nth-child(3) { animation-delay: 0.15s; }
    .portal-dashboard-grid .portal-card:nth-child(4) { animation-delay: 0.2s; }
    .portal-dashboard-grid .portal-card:nth-child(5) { animation-delay: 0.25s; }
    .portal-dashboard-grid .portal-card:nth-child(6) { animation-delay: 0.3s; }

    .portal-card-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 10px;
    }

    .portal-card-icon {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        border-radius: 10px;
        background: var(--accent-bg);

        & i, & svg {
            width: 20px;
            height: 20px;
            color: var(--accent);
        }
    }

    .portal-card-count {
        font-size: 1.75rem;
        font-weight: 800;
        color: var(--accent);
        line-height: 1;
        font-variant-numeric: tabular-nums;
    }

    .portal-card h3 {
        font-size: 0.9rem;
        color: var(--text-secondary);
        font-weight: 600;
        margin-bottom: 12px;
    }

    .portal-card-list {
        display: flex;
        flex-direction: column;
        gap: 0;
        flex: 1;
    }

    .portal-card-list-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 0.85rem;
        padding: 8px 0;
        border-top: 1px solid rgba(255, 255, 255, 0.04);
        transition: all var(--transition);
        gap: 8px;

        &:hover {
            color: var(--accent);
        }

        &[onclick] {
            cursor: pointer;
        }
    }

    .portal-card-item-label {
        display: flex;
        align-items: center;
        gap: 6px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        min-width: 0;
    }

    .portal-card-item-icon {
        flex-shrink: 0;
        display: flex;
    }

    .portal-card-file-size {
        font-size: 0.75rem;
        color: var(--text-muted);
        font-weight: 500;
        font-variant-numeric: tabular-nums;
        white-space: nowrap;
    }

    .portal-card-empty {
        padding: 16px 0;
        font-size: 0.85rem;
        color: var(--text-muted);
        text-align: center;
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .portal-card-footer {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-top: 12px;
        padding-top: 10px;
        border-top: 1px solid rgba(255, 255, 255, 0.05);
        font-size: 0.8rem;
        color: var(--text-muted);
        transition: color var(--transition);

        .portal-card--clickable:hover & {
            color: var(--accent);
        }
    }

    /* Quick Stats (summary card) */
    .portal-quick-stats {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .portal-quick-stat {
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 0.85rem;
        color: var(--text-secondary);
    }

    /* Unread indicator */
    .portal-unread {
        font-weight: 600;
        color: var(--text-primary);
        position: relative;

        &::before {
            content: '';
            position: absolute;
            right: -12px;
            top: 50%;
            transform: translateY(-50%);
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--accent);
        }
    }

    /* Status badges */
    .portal-status-badge {
        font-size: 0.72rem;
        padding: 3px 10px;
        border-radius: 12px;
        font-weight: 600;
        white-space: nowrap;
        letter-spacing: 0.01em;
    }

    .status-active { background: rgba(16, 185, 129, 0.12); color: #10b981; }
    .status-in_progress { background: rgba(59, 130, 246, 0.12); color: #3b82f6; }
    .status-review { background: rgba(245, 158, 11, 0.12); color: #f59e0b; }
    .status-completed { background: rgba(139, 92, 246, 0.12); color: #8b5cf6; }
    .status-pending { background: rgba(245, 158, 11, 0.12); color: #f59e0b; }
    .status-approved { background: rgba(16, 185, 129, 0.12); color: #10b981; }
    .status-revision_requested { background: rgba(239, 68, 68, 0.12); color: #ef4444; }
    .status-draft { background: rgba(107, 114, 128, 0.12); color: #6b7280; }

    /* ========================================
       PROJECTS — Phase 4
       ======================================== */

    .portal-page-header {
        display: flex;
        align-items: baseline;
        gap: 12px;
        margin-bottom: 4px;
    }

    .portal-page-title {
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 0;
    }

    .portal-page-count {
        font-size: 0.85rem;
        color: var(--text-muted);
        font-weight: 400;
    }

    /* Filter Tabs */
    .portal-filter-tabs {
        display: flex;
        gap: 6px;
        margin-bottom: 20px;
        overflow-x: auto;
        padding-bottom: 4px;
        scrollbar-width: none;

        &::-webkit-scrollbar { display: none; }
    }

    .portal-filter-tab {
        background: transparent;
        border: 1px solid var(--border-color);
        color: var(--text-secondary);
        padding: 7px 16px;
        border-radius: 20px;
        font-size: 0.82rem;
        font-weight: 500;
        font-family: var(--font-arabic), var(--font-sans);
        cursor: pointer;
        transition: all var(--transition);
        white-space: nowrap;

        &:hover {
            border-color: var(--border-light);
            color: var(--text-primary);
            background: var(--bg-hover);
        }

        &.portal-filter-active {
            background: var(--accent-bg);
            border-color: var(--accent-border);
            color: var(--accent);
        }
    }

    /* Projects Grid */
    .portal-projects-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
    }

    .portal-project-card {
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-lg);
        overflow: hidden;
        cursor: pointer;
        transition: all var(--transition);
        animation: portalCardEnter 0.5s cubic-bezier(0.16, 1, 0.3, 1) backwards;

        &:hover {
            transform: translateY(-4px);
            border-color: color-mix(in srgb, var(--accent), transparent 70%);
            box-shadow:
                0 12px 32px rgba(0, 0, 0, 0.3),
                var(--shadow-glow);

            & .portal-project-cover img {
                transform: scale(1.03);
            }
        }
    }

    .portal-project-cover {
        height: 160px;
        position: relative;
        background: linear-gradient(135deg, var(--bg-primary), var(--bg-tertiary));
        overflow: hidden;

        & img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1);
        }
    }

    .portal-project-cover-placeholder {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100%;
        opacity: 0.15;
        color: var(--text-muted);
    }

    .portal-project-cover .portal-status-badge {
        position: absolute;
        top: 12px;
        right: 12px;
        backdrop-filter: blur(8px);
    }

    .portal-project-info {
        padding: 16px 18px;

        & h3 {
            font-size: 1.05rem;
            font-weight: 700;
            margin-bottom: 6px;
            letter-spacing: -0.01em;
        }
    }

    .portal-project-desc {
        font-size: 0.82rem;
        color: var(--text-secondary);
        line-height: 1.5;
        margin-bottom: 4px;
    }

    .portal-project-meta {
        margin-top: 12px;
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        font-size: 0.78rem;
        color: var(--text-muted);
    }

    .portal-meta-item {
        display: inline-flex;
        align-items: center;
        gap: 4px;
    }

    /* Pagination */
    .portal-pagination {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 6px;
        margin-top: 28px;
        padding-top: 20px;
        border-top: 1px solid var(--border-color);
    }

    .portal-pagination-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        min-width: 36px;
        height: 36px;
        border-radius: var(--radius);
        border: 1px solid var(--border-color);
        background: transparent;
        color: var(--text-secondary);
        font-size: 0.85rem;
        font-weight: 500;
        font-family: var(--font-sans);
        cursor: pointer;
        transition: all var(--transition);
        padding: 0 8px;

        &:hover:not(:disabled) {
            border-color: var(--border-light);
            color: var(--text-primary);
            background: var(--bg-hover);
        }

        &:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        &.portal-pagination-active {
            background: var(--accent);
            border-color: var(--accent);
            color: white;
        }
    }

    .portal-pagination-dots {
        padding: 0 4px;
        color: var(--text-muted);
        font-size: 0.85rem;
    }

    /* ========================================
       SKELETON LOADING
       ======================================== */

    .portal-skeleton {
        background: linear-gradient(
            90deg,
            var(--bg-tertiary) 25%,
            rgba(255, 255, 255, 0.04) 50%,
            var(--bg-tertiary) 75%
        );
        background-size: 200% 100%;
        animation: portalSkeletonPulse 1.5s ease-in-out infinite;
        border-radius: var(--radius);
    }

    .portal-skeleton-card {
        pointer-events: none;
    }

    /* ========================================
       EMPTY & ERROR STATES
       ======================================== */

    .portal-error {
        text-align: center;
        padding: 60px 24px;
        color: var(--text-secondary);
    }

    .portal-error-state {
        text-align: center;
        padding: 80px 24px;
        animation: portalFadeIn 0.3s ease;

        & h3 {
            font-size: 1.15rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        & p {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-bottom: 20px;
        }
    }

    .portal-error-icon {
        margin-bottom: 16px;

        & i, & svg {
            width: 48px;
            height: 48px;
            color: var(--portal-danger);
            opacity: 0.7;
        }
    }

    .portal-btn-retry {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        background: var(--accent-bg);
        border: 1px solid var(--accent-border);
        color: var(--accent);
        padding: 10px 20px;
        border-radius: var(--radius);
        font-size: 0.9rem;
        font-weight: 600;
        font-family: var(--font-arabic), var(--font-sans);
        cursor: pointer;
        transition: all var(--transition);

        &:hover {
            background: color-mix(in srgb, var(--accent), transparent 85%);
        }

        & i, & svg {
            width: 16px;
            height: 16px;
        }
    }

    .portal-empty-state {
        text-align: center;
        padding: 60px 24px;
        animation: portalFadeIn 0.3s ease;

        & h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        & p {
            color: var(--text-muted);
            font-size: 0.9rem;
        }
    }

    .portal-empty-icon {
        margin-bottom: 16px;

        & i, & svg {
            width: 48px;
            height: 48px;
            color: var(--text-muted);
            opacity: 0.4;
        }
    }

    /* Back button (stub screens) */
    .portal-back-btn {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        background: transparent;
        border: 1px solid var(--border-color);
        color: var(--text-secondary);
        padding: 8px 16px;
        border-radius: var(--radius);
        font-size: 0.85rem;
        font-weight: 500;
        font-family: var(--font-arabic), var(--font-sans);
        cursor: pointer;
        transition: all var(--transition);
        margin-bottom: 24px;

        &:hover {
            border-color: var(--border-light);
            color: var(--text-primary);
            background: var(--bg-hover);
        }

        & i, & svg {
            width: 16px;
            height: 16px;
        }
    }

    .portal-stub-screen {
        animation: portalFadeIn 0.3s ease;
    }

    /* Progress bar */
    .portal-progress-bar-wrap {
        width: 100%;
        height: 4px;
        background: rgba(255, 255, 255, 0.06);
        border-radius: 2px;
        overflow: hidden;
        margin-top: 12px;
    }

    .portal-progress-bar {
        height: 100%;
        background: linear-gradient(90deg, var(--accent-dim), var(--accent));
        border-radius: 2px;
        transition: width 0.5s ease;
    }

    /* ========================================
       PROJECT DETAIL — Phase 5
       ======================================== */

    .portal-project-detail {
        animation: portalFadeIn 0.4s ease;
    }

    /* Detail Hero */
    .portal-detail-hero {
        background: var(--portal-glass);
        backdrop-filter: blur(16px) saturate(160%);
        -webkit-backdrop-filter: blur(16px) saturate(160%);
        border: 1px solid var(--portal-glass-border);
        border-radius: var(--radius-lg);
        padding: 28px 32px;
        margin-bottom: 24px;
        position: relative;
        overflow: hidden;

        &::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--accent), transparent);
            opacity: 0.3;
        }
    }

    .portal-detail-title-row {
        display: flex;
        align-items: center;
        gap: 12px;
        flex-wrap: wrap;
        margin-bottom: 8px;

        & h1 {
            font-size: 1.6rem;
            font-weight: 800;
            letter-spacing: -0.02em;
            line-height: 1.2;
        }
    }

    .portal-detail-desc {
        font-size: 0.9rem;
        color: var(--text-secondary);
        line-height: 1.6;
        margin-bottom: 12px;
        max-width: 700px;
    }

    .portal-detail-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 16px;
        font-size: 0.82rem;
        color: var(--text-muted);
        margin-bottom: 4px;
    }

    .portal-detail-progress-section {
        margin-top: 20px;
        padding-top: 16px;
        border-top: 1px solid rgba(255, 255, 255, 0.05);
    }

    .portal-detail-progress-stats {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 8px;
    }

    .portal-detail-progress-label {
        font-size: 0.8rem;
        color: var(--text-muted);
        font-weight: 500;
    }

    .portal-detail-progress-pct {
        font-size: 0.9rem;
        font-weight: 700;
        color: var(--accent);
        font-variant-numeric: tabular-nums;
    }

    .portal-detail-approval-summary {
        display: flex;
        gap: 16px;
        margin-top: 10px;
        flex-wrap: wrap;
    }

    .portal-approval-stat {
        display: inline-flex;
        align-items: center;
        gap: 5px;
        font-size: 0.78rem;
        font-weight: 500;
    }

    .portal-approval-stat--approved { color: var(--portal-success); }
    .portal-approval-stat--pending { color: var(--portal-warning); }
    .portal-approval-stat--revision { color: var(--portal-danger); }

    /* Detail Filters */
    .portal-detail-filters {
        margin-bottom: 20px;
    }

    .portal-filter-tabs--secondary {
        margin-top: 8px;
    }

    .portal-filter-tab--sm {
        padding: 5px 12px;
        font-size: 0.78rem;
    }

    /* File Grid */
    .portal-file-grid {
        display: flex;
        flex-direction: column;
        gap: 8px;
    }

    .portal-file-card {
        display: flex;
        align-items: center;
        gap: 14px;
        padding: 14px 18px;
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-lg);
        cursor: pointer;
        transition: all var(--transition);
        animation: portalCardEnter 0.4s cubic-bezier(0.16, 1, 0.3, 1) backwards;

        &:hover {
            transform: translateX(-4px);
            border-color: color-mix(in srgb, var(--accent), transparent 70%);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2), var(--shadow-glow);
            background: color-mix(in srgb, var(--accent), transparent 97%);
        }
    }

    .portal-file-card-icon {
        width: 48px;
        height: 48px;
        min-width: 48px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 12px;
        background: var(--bg-tertiary);
        overflow: hidden;

        & i, & svg {
            width: 24px;
            height: 24px;
            color: var(--text-muted);
        }
    }

    .portal-file-thumb {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 12px;
    }

    .portal-file-card-info {
        flex: 1;
        min-width: 0;
    }

    .portal-file-card-name {
        font-size: 0.9rem;
        font-weight: 600;
        margin-bottom: 3px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .portal-file-card-meta {
        display: flex;
        gap: 6px;
        font-size: 0.75rem;
        color: var(--text-muted);
    }

    .portal-file-card-status {
        flex-shrink: 0;
    }

    /* Approval Badges */
    .portal-approval-badge {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        padding: 4px 10px;
        border-radius: 12px;
        font-size: 0.72rem;
        font-weight: 600;
        white-space: nowrap;
    }

    .portal-approval-badge--pending {
        background: rgba(245, 158, 11, 0.12);
        color: #f59e0b;
    }

    .portal-approval-badge--approved {
        background: rgba(16, 185, 129, 0.12);
        color: #10b981;
    }

    .portal-approval-badge--revision {
        background: rgba(239, 68, 68, 0.12);
        color: #ef4444;
    }

    /* ========================================
       FILE PREVIEW — Phase 5
       ======================================== */

    .portal-file-preview {
        animation: portalFadeIn 0.4s ease;
    }

    .portal-preview-container {
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-lg);
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 300px;
        max-height: 70vh;
        position: relative;
    }

    .portal-preview-image {
        max-width: 100%;
        max-height: 70vh;
        object-fit: contain;
        display: block;
        margin: 0 auto;
    }

    .portal-preview-video {
        width: 100%;
        max-height: 70vh;
        background: #000;
        outline: none;
    }

    .portal-preview-audio-wrap {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 24px;
        padding: 60px 40px;
        width: 100%;
    }

    .portal-preview-audio-icon {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100px;
        height: 100px;
        border-radius: 50%;
        background: var(--accent-bg);

        & i, & svg {
            color: var(--accent);
        }
    }

    .portal-preview-audio {
        width: 100%;
        max-width: 500px;
        height: 40px;
    }

    .portal-preview-pdf {
        width: 100%;
        height: 70vh;
        border: none;
        background: white;
    }

    .portal-preview-placeholder {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 12px;
        padding: 60px 40px;
        color: var(--text-muted);
        text-align: center;

        & i, & svg {
            width: 64px;
            height: 64px;
            opacity: 0.35;
        }

        & p {
            font-size: 0.95rem;
            font-weight: 500;
        }

        & span {
            font-size: 0.8rem;
            color: var(--text-muted);
        }
    }

    /* Preview Info Panel */
    .portal-preview-info-panel {
        margin-top: 20px;
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-lg);
        padding: 24px;
    }

    .portal-preview-header {
        display: flex;
        align-items: flex-start;
        gap: 14px;
        margin-bottom: 16px;
    }

    .portal-preview-file-icon {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 44px;
        height: 44px;
        min-width: 44px;
        border-radius: 12px;
        background: var(--accent-bg);

        & i, & svg {
            width: 22px;
            height: 22px;
            color: var(--accent);
        }
    }

    .portal-preview-file-details {
        min-width: 0;

        & h2 {
            font-size: 1.15rem;
            font-weight: 700;
            margin-bottom: 4px;
            word-break: break-word;
        }
    }

    .portal-preview-meta {
        display: flex;
        gap: 6px;
        font-size: 0.78rem;
        color: var(--text-muted);
        flex-wrap: wrap;
    }

    /* Preview Action Buttons */
    .portal-preview-actions {
        display: flex;
        gap: 10px;
        margin-bottom: 16px;
        flex-wrap: wrap;
    }

    .portal-btn {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 10px 20px;
        border-radius: var(--radius);
        font-size: 0.88rem;
        font-weight: 600;
        font-family: var(--font-arabic), var(--font-sans);
        cursor: pointer;
        transition: all var(--transition);
        border: 1px solid transparent;
        text-decoration: none;
        white-space: nowrap;
    }

    .portal-btn--primary {
        background: linear-gradient(135deg, var(--accent), var(--accent-dim));
        color: white;
        box-shadow: 0 2px 8px color-mix(in srgb, var(--accent), transparent 60%);

        &:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 16px color-mix(in srgb, var(--accent), transparent 50%);
        }
    }

    .portal-btn--ghost {
        background: transparent;
        border-color: var(--border-color);
        color: var(--text-secondary);

        &:hover {
            border-color: var(--border-light);
            color: var(--text-primary);
            background: var(--bg-hover);
        }
    }

    .portal-btn--success {
        background: rgba(16, 185, 129, 0.12);
        border-color: rgba(16, 185, 129, 0.3);
        color: #10b981;

        &:hover {
            background: rgba(16, 185, 129, 0.2);
            transform: translateY(-1px);
        }
    }

    .portal-btn--danger-outline {
        background: transparent;
        border-color: rgba(239, 68, 68, 0.3);
        color: #ef4444;

        &:hover {
            background: rgba(239, 68, 68, 0.08);
            transform: translateY(-1px);
        }
    }

    .portal-btn--danger {
        background: rgba(239, 68, 68, 0.12);
        border-color: rgba(239, 68, 68, 0.3);
        color: #ef4444;

        &:hover {
            background: rgba(239, 68, 68, 0.2);
        }
    }

    .portal-btn-loading {
        pointer-events: none;
        opacity: 0.7;
    }

    /* ========================================
       APPROVAL SECTION — Phase 5
       ======================================== */

    .portal-approval-section {
        padding: 16px 18px;
        border-radius: var(--radius);
        margin-bottom: 16px;
        animation: portalFadeIn 0.3s ease;
    }

    .portal-approval-section--pending {
        background: rgba(245, 158, 11, 0.06);
        border: 1px solid rgba(245, 158, 11, 0.15);
    }

    .portal-approval-section--approved {
        background: rgba(16, 185, 129, 0.06);
        border: 1px solid rgba(16, 185, 129, 0.15);
    }

    .portal-approval-section--revision {
        background: rgba(239, 68, 68, 0.06);
        border: 1px solid rgba(239, 68, 68, 0.15);
    }

    .portal-approval-header {
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 0.9rem;
        font-weight: 600;

        & time {
            font-size: 0.78rem;
            color: var(--text-muted);
            font-weight: 400;
            margin-right: auto;
        }
    }

    .portal-approval-actions {
        display: flex;
        gap: 10px;
        margin-top: 14px;
    }

    .portal-revision-form {
        margin-top: 14px;
    }

    .portal-textarea {
        width: 100%;
        padding: 12px 14px;
        background: rgba(255, 255, 255, 0.025);
        border: 1px solid var(--border-color);
        border-radius: var(--radius);
        color: var(--text-primary);
        font-size: 0.88rem;
        font-family: var(--font-arabic), var(--font-sans);
        outline: none;
        resize: vertical;
        min-height: 80px;
        transition: all var(--transition);
        direction: rtl;

        &::placeholder {
            color: var(--text-muted);
            opacity: 0.6;
        }

        &:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px var(--accent-bg);
        }
    }

    .portal-revision-form-actions {
        display: flex;
        gap: 8px;
        margin-top: 10px;
    }

    .portal-approval-comment {
        margin-top: 10px;
        padding: 10px 14px;
        background: rgba(255, 255, 255, 0.03);
        border-radius: var(--radius);
        border-right: 3px solid var(--portal-danger);

        & p {
            font-size: 0.85rem;
            color: var(--text-secondary);
            font-style: italic;
            line-height: 1.6;
        }
    }

    /* Preview Project Link */
    .portal-preview-project-link {
        padding-top: 12px;
        border-top: 1px solid rgba(255, 255, 255, 0.04);
        font-size: 0.82rem;
        color: var(--text-muted);
    }

    /* ========================================
       NOTIFICATIONS — Phase 6
       ======================================== */

    .portal-notifications {
        animation: portalFadeIn 0.4s ease;
    }

    .portal-notif-toolbar {
        display: flex;
        justify-content: flex-end;
        margin-bottom: 16px;
    }

    .portal-btn--sm {
        padding: 7px 14px;
        font-size: 0.8rem;
    }

    .portal-notif-list {
        display: flex;
        flex-direction: column;
        gap: 6px;
    }

    .portal-notif-item {
        display: flex;
        align-items: flex-start;
        gap: 14px;
        padding: 16px 18px;
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-lg);
        cursor: pointer;
        transition: all var(--transition);
        animation: portalCardEnter 0.4s cubic-bezier(0.16, 1, 0.3, 1) backwards;
        position: relative;

        &:hover {
            border-color: color-mix(in srgb, var(--accent), transparent 70%);
            background: color-mix(in srgb, var(--accent), transparent 97%);
        }
    }

    .portal-notif-item--unread {
        background: color-mix(in srgb, var(--accent), var(--bg-secondary) 97%);
        border-color: var(--accent-border);

        & .portal-notif-title {
            color: var(--text-primary);
            font-weight: 700;
        }
    }

    .portal-notif-icon {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        min-width: 40px;
        border-radius: 10px;
        background: var(--bg-tertiary);
    }

    .portal-notif-content {
        flex: 1;
        min-width: 0;
    }

    .portal-notif-title {
        font-size: 0.9rem;
        font-weight: 600;
        color: var(--text-secondary);
        margin-bottom: 3px;
        line-height: 1.5;
    }

    .portal-notif-message {
        font-size: 0.8rem;
        color: var(--text-muted);
        line-height: 1.5;
        margin-bottom: 4px;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .portal-notif-time {
        font-size: 0.72rem;
        color: var(--text-muted);
    }

    .portal-notif-dot {
        width: 8px;
        height: 8px;
        min-width: 8px;
        border-radius: 50%;
        background: var(--accent);
        margin-top: 6px;
        box-shadow: 0 0 8px color-mix(in srgb, var(--accent), transparent 50%);
    }

    /* ========================================
       COMMENTS — Phase 6
       ======================================== */

    .portal-comments-section {
        margin-top: 32px;
        padding-top: 24px;
        border-top: 1px solid var(--border-color);
    }

    .portal-comments-header {
        margin-bottom: 16px;
    }

    .portal-section-title {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 0.95rem;
        font-weight: 700;
        color: var(--text-primary);
    }

    .portal-comments-list {
        display: flex;
        flex-direction: column;
        gap: 4px;
        margin-bottom: 16px;
    }

    .portal-comments-empty {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
        padding: 32px 16px;
        color: var(--text-muted);
        font-size: 0.85rem;
        text-align: center;
    }

    .portal-comments-loading {
        display: flex;
        justify-content: center;
        padding: 32px;
    }

    .portal-comments-error {
        text-align: center;
        padding: 24px;
        color: var(--text-muted);
        font-size: 0.85rem;

        & p {
            margin-bottom: 10px;
        }
    }

    .portal-comment {
        display: flex;
        gap: 10px;
        padding: 12px 0;
    }

    .portal-comment--nested {
        margin-inline-start: 36px;
        padding-inline-start: 14px;
        border-inline-start: 2px solid var(--border-color);
    }

    .portal-comment-avatar {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 32px;
        height: 32px;
        min-width: 32px;
        border-radius: 50%;
        background: var(--bg-tertiary);
        color: var(--text-muted);
    }

    .portal-comment--team .portal-comment-avatar {
        background: rgba(59, 130, 246, 0.12);
        color: var(--portal-info);
    }

    .portal-comment--client .portal-comment-avatar {
        background: var(--accent-bg);
        color: var(--accent);
    }

    .portal-comment-body {
        flex: 1;
        min-width: 0;
    }

    .portal-comment-meta {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 4px;
        flex-wrap: wrap;

        & strong {
            font-size: 0.85rem;
            font-weight: 700;
        }

        & time {
            font-size: 0.72rem;
            color: var(--text-muted);
        }
    }

    .portal-comment-badge {
        font-size: 0.65rem;
        padding: 2px 8px;
        border-radius: 10px;
        font-weight: 600;
        letter-spacing: 0.02em;
    }

    .portal-comment-badge--team {
        background: rgba(59, 130, 246, 0.12);
        color: #3b82f6;
    }

    .portal-comment-badge--client {
        background: var(--accent-bg);
        color: var(--accent);
    }

    .portal-comment-text {
        font-size: 0.88rem;
        color: var(--text-secondary);
        line-height: 1.7;
        word-break: break-word;
    }

    .portal-comment-reply-btn {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        background: transparent;
        border: none;
        color: var(--text-muted);
        font-size: 0.75rem;
        font-weight: 500;
        font-family: var(--font-arabic), var(--font-sans);
        cursor: pointer;
        padding: 4px 0;
        margin-top: 4px;
        transition: color var(--transition);

        &:hover {
            color: var(--accent);
        }
    }

    .portal-reply-form-slot {
        margin-top: 8px;
    }

    .portal-comment-form {
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: var(--radius);
        padding: 14px;
    }

    .portal-comment-input {
        min-height: 60px;
        font-size: 0.85rem;
    }

    .portal-comment-form-actions {
        display: flex;
        gap: 8px;
        margin-top: 8px;
        justify-content: flex-end;
    }

    /* ========================================
       PROFILE — Phase 6
       ======================================== */

    .portal-profile {
        animation: portalFadeIn 0.4s ease;
        max-width: 700px;
    }

    .portal-profile-card {
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-lg);
        padding: 28px 32px;
        margin-top: 20px;
    }

    .portal-profile-header {
        display: flex;
        align-items: center;
        gap: 20px;
    }

    .portal-profile-avatar {
        width: 80px;
        height: 80px;
        min-width: 80px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--accent-dim), var(--accent));
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        box-shadow: 0 4px 16px color-mix(in srgb, var(--accent), transparent 60%);
    }

    .portal-profile-avatar-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .portal-profile-avatar-initials {
        font-size: 1.75rem;
        font-weight: 800;
        color: white;
        letter-spacing: -0.02em;
    }

    .portal-profile-info {
        flex: 1;
        min-width: 0;

        & h3 {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 4px;
        }
    }

    .portal-profile-email {
        font-size: 0.88rem;
        color: var(--text-secondary);
        margin-bottom: 10px;
        direction: ltr;
        text-align: right;
    }

    .portal-profile-tags {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
    }

    .portal-profile-tag {
        display: inline-flex;
        align-items: center;
        gap: 5px;
        font-size: 0.75rem;
        color: var(--text-muted);
        background: var(--bg-tertiary);
        padding: 4px 10px;
        border-radius: 8px;
        font-weight: 500;
    }

    .portal-profile-form {
        margin-top: 16px;
    }

    .portal-profile-form .portal-form-group {
        margin-bottom: 18px;
    }

    .portal-input--rtl {
        direction: rtl;
        text-align: right;
    }

    .portal-select {
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23505c74' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: left 14px center;
        padding-inline-end: 36px;
        cursor: pointer;

        & option {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }
    }

    .portal-form-hint {
        display: block;
        font-size: 0.72rem;
        color: var(--text-muted);
        margin-top: 6px;
    }

    /* ========================================
       Phase 7: Locked Fields + Password Strength
       ======================================== */

    .portal-profile-locked-fields {
        display: flex;
        flex-direction: column;
        gap: 14px;
        margin-top: 16px;
    }

    .portal-locked-field {
        display: flex;
        flex-direction: column;
        gap: 6px;
    }

    .portal-locked-value {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px 16px;
        background: var(--bg-tertiary);
        border: 1px solid var(--border-color);
        border-radius: var(--radius);
        font-size: 0.88rem;
        color: var(--text-secondary);
        cursor: not-allowed;
        position: relative;
    }

    .portal-lock-icon {
        width: 14px;
        height: 14px;
        color: var(--text-muted);
        opacity: 0.5;
        flex-shrink: 0;
    }

    .portal-locked-hint {
        display: flex;
        align-items: center;
        gap: 6px;
        font-size: 0.72rem;
        color: var(--text-muted);
        margin-top: 14px;
        padding: 8px 12px;
        background: color-mix(in srgb, var(--accent), transparent 92%);
        border-radius: var(--radius);
        border: 1px solid color-mix(in srgb, var(--accent), transparent 85%);
    }

    /* Password Strength Bar */
    .portal-pw-strength-wrap {
        position: relative;
    }

    .portal-pw-strength-wrap .portal-pw-input {
        padding-bottom: 18px;
    }

    .portal-pw-strength-bar {
        height: 4px;
        background: var(--bg-tertiary);
        border-radius: 2px;
        margin-top: 8px;
        overflow: hidden;
    }

    .portal-pw-strength-fill {
        height: 100%;
        width: 0%;
        border-radius: 2px;
        transition: width 0.35s ease, background 0.35s ease;
    }

    .portal-pw-strength-label {
        display: block;
        font-size: 0.72rem;
        font-weight: 600;
        margin-top: 4px;
        min-height: 1em;
        text-align: left;
        direction: ltr;
        transition: color 0.35s ease;
    }

    /* Success saved state (profile/password save confirmation) */
    .portal-btn--saved {
        background: #10b981;
        border-color: #10b981;
        color: white;
        pointer-events: none;
        animation: portalSuccessPulse 0.4s ease;
    }

    @keyframes portalSuccessPulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.04); }
        100% { transform: scale(1); }
    }
}

/* ---- Utilities Layer ---- */
@layer utilities {

    .portal-hidden[class] {
        display: none;
    }

    /* ========================================
       KEYFRAME ANIMATIONS
       ======================================== */

    @keyframes portalOrb1 {
        from { transform: translate(0, 0) scale(1); }
        to { transform: translate(-60px, 50px) scale(1.15); }
    }

    @keyframes portalOrb2 {
        from { transform: translate(0, 0) scale(1); }
        to { transform: translate(40px, -40px) scale(1.2); }
    }

    @keyframes portalOrbFloat {
        0% { transform: translate(0, 0) scale(1); }
        33% { transform: translate(30px, -20px) scale(1.05); }
        66% { transform: translate(-20px, 30px) scale(0.95); }
        100% { transform: translate(10px, -10px) scale(1); }
    }

    @keyframes portalDotFloat {
        0% { transform: translateY(100vh) translateX(0); opacity: 0; }
        8% { opacity: 0.2; }
        92% { opacity: 0.2; }
        100% { transform: translateY(-10vh) translateX(25px); opacity: 0; }
    }

    @keyframes portalCardIn {
        from {
            opacity: 0;
            transform: translateY(24px) scale(0.96);
        }
        to {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
    }

    @keyframes portalShake {
        0%, 100% { transform: translateX(0); }
        10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
        20%, 40%, 60%, 80% { transform: translateX(4px); }
    }

    @keyframes portalSpin {
        to { transform: rotate(360deg); }
    }

    @keyframes portalFadeIn {
        from { opacity: 0; transform: translateY(8px); }
        to { opacity: 1; transform: translateY(0); }
    }

    @keyframes portalToastIn {
        from {
            opacity: 0;
            transform: translateY(16px) scale(0.95);
        }
        to {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
    }

    @keyframes portalToastOut {
        to {
            opacity: 0;
            transform: translateY(16px) scale(0.95);
        }
    }

    @keyframes portalModalIn {
        from {
            opacity: 0;
            transform: scale(0.95) translateY(12px);
        }
        to {
            opacity: 1;
            transform: scale(1) translateY(0);
        }
    }

    @keyframes portalBadgeBounce {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.15); }
    }

    @keyframes portalSkeletonPulse {
        0% { background-position: 200% 0; }
        100% { background-position: -200% 0; }
    }

    @keyframes portalCardEnter {
        from {
            opacity: 0;
            transform: translateY(12px) scale(0.98);
        }
        to {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
    }

    /* ========================================
       REDUCED MOTION
       ======================================== */

    @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
        }

        .portal-login-card {
            animation: none;
        }

        .portal-particles {
            display: none;
        }

        .portal-login-screen::before,
        .portal-login-screen::after {
            animation: none;
        }
    }

    /* ========================================
       RESPONSIVE DESIGN
       ======================================== */

    @media (max-width: 900px) {
        .portal-top-bar-inner {
            padding: 0 16px;
        }

        .portal-nav {
            & span {
                display: none;
            }
        }

        .portal-nav-btn {
            padding: 8px 12px;
        }

        .portal-user-name {
            display: none;
        }

        .portal-user-chevron {
            display: none;
        }

        .portal-main {
            padding: 16px;
        }

        .portal-dashboard-grid {
            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
        }

        .portal-welcome-content {
            flex-direction: column;
            align-items: flex-start;
            gap: 16px;
        }

        .portal-welcome-stats {
            gap: 24px;
        }

        .portal-detail-hero {
            padding: 20px 24px;
        }

        .portal-detail-title-row h1 {
            font-size: 1.3rem;
        }

        .portal-preview-info-panel {
            padding: 18px;
        }

        .portal-profile-card {
            padding: 20px 24px;
        }

        .portal-comment--nested {
            margin-inline-start: 24px;
        }
    }

    @media (max-width: 768px) {
        .portal-nav {
            display: none;
            position: fixed;
            top: var(--portal-header-height);
            right: 0;
            left: 0;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            flex-direction: column;
            padding: 12px;
            gap: 4px;
            z-index: 99;

            &.portal-nav-open {
                display: flex;
            }

            & span {
                display: inline;
            }
        }

        .portal-nav-btn {
            justify-content: flex-start;
            padding: 12px 16px;
        }

        .portal-mobile-toggle {
            display: flex;
        }

        .portal-login-card {
            padding: 36px 28px 32px;
        }

        .portal-login-title {
            font-size: 1.4rem;
        }

        .portal-projects-grid {
            grid-template-columns: 1fr;
        }

        .portal-user-dropdown {
            left: auto;
            right: 0;
        }
    }

    @media (max-width: 480px) {
        .portal-login-card {
            max-width: calc(100% - 32px);
            padding: 32px 24px 28px;
        }

        .portal-login-logo-icon {
            width: 52px;
            height: 52px;

            & svg {
                width: 40px;
                height: 40px;
            }
        }

        .portal-login-title {
            font-size: 1.25rem;
        }

        .portal-login-subtitle {
            font-size: 0.85rem;
        }

        .portal-input {
            padding: 12px 40px 12px 12px;
            font-size: 0.875rem;
        }

        .portal-main {
            padding: 12px;
        }

        .portal-welcome-card {
            padding: 20px;
        }

        .portal-welcome-text h2 {
            font-size: 1.25rem;
        }

        .portal-welcome-stats {
            gap: 16px;
        }

        .portal-welcome-stat-num {
            font-size: 1.4rem;
        }

        .portal-dashboard-grid {
            grid-template-columns: 1fr;
        }

        .portal-projects-grid {
            grid-template-columns: 1fr;
        }

        .portal-filter-tabs {
            gap: 4px;
        }

        .portal-filter-tab {
            padding: 6px 12px;
            font-size: 0.78rem;
        }

        /* Phase 5 mobile */
        .portal-detail-hero {
            padding: 16px;
        }

        .portal-detail-title-row h1 {
            font-size: 1.15rem;
        }

        .portal-detail-meta {
            gap: 10px;
            font-size: 0.78rem;
        }

        .portal-detail-approval-summary {
            gap: 10px;
        }

        .portal-file-card {
            padding: 12px 14px;
            gap: 10px;
        }

        .portal-file-card-icon {
            width: 40px;
            height: 40px;
            min-width: 40px;
        }

        .portal-file-card-name {
            font-size: 0.82rem;
        }

        .portal-preview-actions {
            flex-direction: column;
        }

        .portal-preview-info-panel {
            padding: 16px;
        }

        .portal-preview-header {
            flex-direction: column;
            gap: 10px;
        }

        .portal-approval-actions {
            flex-direction: column;
        }

        /* Phase 6 mobile */
        .portal-profile-header {
            flex-direction: column;
            text-align: center;
        }

        .portal-profile-info {
            text-align: center;
        }

        .portal-profile-email {
            text-align: center;
        }

        .portal-profile-tags {
            justify-content: center;
        }

        .portal-profile-avatar {
            width: 64px;
            height: 64px;
            min-width: 64px;
        }

        .portal-profile-avatar-initials {
            font-size: 1.4rem;
        }

        .portal-profile-card {
            padding: 18px 16px;
        }

        .portal-notif-item {
            padding: 12px 14px;
            gap: 10px;
        }

        .portal-notif-icon {
            width: 34px;
            height: 34px;
            min-width: 34px;
        }

        .portal-comment--nested {
            margin-inline-start: 16px;
            padding-inline-start: 10px;
        }

        .portal-comment-form {
            padding: 10px;
        }

        /* Phase 7 mobile */
        .portal-locked-value {
            padding: 10px 14px;
            font-size: 0.82rem;
        }

        .portal-locked-hint {
            font-size: 0.68rem;
        }
    }

    /* ========================================
       SCROLLBAR
       ======================================== */

    ::-webkit-scrollbar {
        width: 6px;
    }

    ::-webkit-scrollbar-track {
        background: transparent;
    }

    ::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.08);
        border-radius: 3px;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.15);
    }
}

/* ═══════════════════════════════════════════════════════════════
   QUOTATION SYSTEM — Client Portal Styles
   ═══════════════════════════════════════════════════════════════ */

.portal-quotes-page {
    padding: 24px;
    max-width: 900px;
    margin: 0 auto;
}

.portal-page-header {
    margin-bottom: 20px;
}
.portal-page-title {
    font-size: 24px;
    font-weight: 700;
    color: #fff;
}

/* Quote Filter Tabs */
.portal-quote-filters {
    display: flex;
    gap: 6px;
    margin-bottom: 20px;
    overflow-x: auto;
    padding-bottom: 4px;
}
.portal-quote-filter-btn {
    padding: 8px 16px;
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 10px;
    background: rgba(255,255,255,0.05);
    color: rgba(255,255,255,0.6);
    font-size: 13px;
    cursor: pointer;
    white-space: nowrap;
    transition: all 0.2s;
    font-family: inherit;
}
.portal-quote-filter-btn:hover {
    background: rgba(255,255,255,0.1);
    color: #fff;
}
.portal-quote-filter-btn.active {
    background: var(--accent, #F97316);
    color: #fff;
    border-color: var(--accent, #F97316);
    font-weight: 600;
}

/* Quote Cards Grid */
.portal-quotes-grid {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.portal-quote-card {
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 14px;
    padding: 18px 20px;
    cursor: pointer;
    transition: all 0.25s ease;
    animation: portalFadeUp 0.4s ease both;
}
.portal-quote-card:hover {
    background: rgba(255,255,255,0.08);
    border-color: rgba(255,255,255,0.15);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.2);
}
.portal-quote-card-top {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}
.portal-quote-card-number {
    font-weight: 700;
    color: var(--accent, #F97316);
    font-size: 15px;
}
.portal-quote-card-project {
    font-size: 14px;
    color: rgba(255,255,255,0.7);
    margin-bottom: 10px;
}
.portal-quote-card-bottom {
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.portal-quote-card-date {
    font-size: 12px;
    color: rgba(255,255,255,0.4);
}
.portal-quote-card-total {
    font-weight: 700;
    font-size: 16px;
    color: #fff;
}

/* Portal Quote Status Badges */
.portal-quote-status {
    display: inline-block;
    padding: 3px 10px;
    border-radius: 20px;
    font-size: 11px;
    font-weight: 600;
}
.portal-quote-status.sent { background: rgba(59,130,246,0.2); color: #93c5fd; }
.portal-quote-status.viewed { background: rgba(251,191,36,0.2); color: #fcd34d; }
.portal-quote-status.signed { background: rgba(34,197,94,0.2); color: #86efac; }
.portal-quote-status.expired { background: rgba(239,68,68,0.2); color: #fca5a5; }
.portal-quote-status.cancelled { background: rgba(107,114,128,0.2); color: #9ca3af; }

/* Quote Detail Page */
.portal-quote-detail-page {
    padding: 24px;
    max-width: 900px;
    margin: 0 auto;
}
.portal-quote-detail-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}
.portal-btn-outline {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 8px 16px;
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: 10px;
    background: transparent;
    color: #fff;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.2s;
    font-family: inherit;
}
.portal-btn-outline:hover { background: rgba(255,255,255,0.1); }
.portal-btn-primary {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 10px 20px;
    border: none;
    border-radius: 10px;
    background: var(--accent, #F97316);
    color: #fff;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    font-family: inherit;
}
.portal-btn-primary:hover { opacity: 0.9; transform: translateY(-1px); }

/* White Quote Paper */
.portal-quote-paper {
    background: #ffffff;
    color: #333;
    padding: 0;
    border-radius: 16px;
    box-shadow: 0 8px 32px rgba(0,0,0,0.3);
    font-family: 'Inter', system-ui, sans-serif;
    overflow: hidden;
}

/* ═══ Portal Quote — Top Section ═══ */
.pq-top-section {
    display: flex;
    gap: 28px;
    padding: 32px 36px 24px;
    align-items: flex-start;
}
.pq-logo-area { flex: 0 0 180px; display: flex; align-items: center; justify-content: center; }
.pq-logo-img { max-width: 160px; max-height: 110px; object-fit: contain; }
.pq-client-info { flex: 1; display: flex; flex-direction: column; gap: 10px; }
.pq-client-row { display: flex; gap: 16px; }
.pq-client-row > .pq-cf { flex: 1; }
.pq-cf { display: flex; flex-direction: column; gap: 2px; }
.pq-cf-label { font-size: 11px; font-weight: 700; color: #999; text-transform: uppercase; letter-spacing: 0.5px; }
.pq-cf-value { font-size: 14px; color: #333; padding: 4px 0; border-bottom: 1px dashed #ddd; }

/* ═══ Orange Divider ═══ */
.pq-divider-orange { height: 2px; background: #F97316; }

/* ═══ Details Row ═══ */
.pq-details-row { display: flex; padding: 18px 36px; border-bottom: 1px solid #eee; gap: 0; }
.pq-detail { flex: 1; display: flex; flex-direction: column; gap: 4px; }
.pq-detail-label { font-size: 11px; font-weight: 700; color: #999; text-transform: uppercase; }
.pq-detail-value { font-size: 15px; font-weight: 600; color: #333; }

/* ═══ Items Section ═══ */
.pq-items-section { padding: 24px 36px 0; }
.pq-items-title {
    font-size: 14px; font-weight: 800; color: #333; text-transform: uppercase;
    letter-spacing: 0.5px; margin: 0 0 14px; display: flex; align-items: center; gap: 8px;
}
.pq-orange-dot { width: 14px; height: 14px; border-radius: 3px; background: #F97316; display: inline-block; }

/* Quote Items Table (portal) */
.portal-quote-table {
    width: 100%;
    border-collapse: collapse;
    margin: 0 0 16px;
}
.portal-quote-table thead th {
    font-size: 11px;
    font-weight: 700;
    color: #999;
    text-transform: uppercase;
    padding: 10px 8px;
    border-bottom: 2px solid #eee;
}
.portal-quote-table tbody td {
    padding: 10px 8px;
    font-size: 13px;
    color: #333;
    border-bottom: 1px solid #f3f4f6;
}

/* ═══ Total Box ═══ */
.pq-total-section { display: flex; justify-content: flex-end; padding: 24px 36px; }
.pq-total-box {
    border: 1px solid #ddd; border-radius: 12px; padding: 16px 32px;
    text-align: center; min-width: 140px;
}
.pq-total-label { font-size: 12px; font-weight: 700; color: #999; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 4px; }
.pq-total-value { font-size: 22px; font-weight: 700; color: #F97316; }

/* ═══ Notes ═══ */
.pq-notes-section { padding: 0 36px 20px; }
.pq-section-label { font-size: 12px; font-weight: 700; color: #999; text-transform: uppercase; margin: 0 0 8px; }
.pq-notes-text { font-size: 13px; color: #555; line-height: 1.6; font-style: italic; white-space: pre-wrap; }

/* ═══ Bank Section (Fixed) ═══ */
.pq-bank-section { padding: 24px 36px; border-top: 1px solid #eee; }
.pq-bank-title { font-size: 15px; font-weight: 700; color: #333; margin: 0 0 14px; }
.pq-bank-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px 40px; }
.pq-bank-col { display: flex; flex-direction: column; gap: 6px; }
.pq-bank-row { font-size: 13px; color: #555; line-height: 1.5; }
.pqb-label { color: #888; }
.pqb-value { font-weight: 700; color: #333; }

/* ═══ Terms Section (Fixed) ═══ */
.pq-terms-section { padding: 24px 36px; border-top: 1px solid #eee; }
.pq-terms-title { font-size: 15px; font-weight: 800; color: #333; text-transform: uppercase; letter-spacing: 0.5px; margin: 0 0 18px; }
.pq-terms-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
.pq-terms-col h4 { font-size: 13px; font-weight: 700; color: #333; margin: 0 0 4px; }
.pq-terms-col p { font-size: 12px; color: #666; line-height: 1.5; margin: 0 0 14px; }

/* ═══ Footer (Fixed) ═══ */
.pq-footer {
    display: flex; justify-content: space-between; align-items: center;
    padding: 16px 36px; background: #333; color: #fff; font-size: 13px;
    border-radius: 0 0 16px 16px;
}
.pq-footer-left { display: flex; align-items: center; gap: 16px; }
.pq-footer-right { color: #F97316; font-weight: 600; font-size: 13px; }

/* Signature Section */
.portal-signature-section {
    margin: 0;
    padding: 24px 36px;
    border-top: 1px solid #eee;
}
.portal-quote-section-title {
    font-size: 13px; font-weight: 700; color: #374151;
    text-transform: uppercase; letter-spacing: 0.5px; margin: 0 0 12px;
}
.portal-signature-pad-wrap {
    border: 2px dashed #d1d5db; border-radius: 12px;
    overflow: hidden; background: #fafafa; margin-bottom: 16px;
}
.portal-signature-canvas {
    width: 100%; height: 200px; cursor: crosshair; display: block; touch-action: none;
}
.portal-signature-controls {
    display: flex; justify-content: space-between; align-items: flex-end; gap: 16px;
}
.portal-signature-name-wrap { flex: 1; }
.portal-signature-name-wrap label {
    display: block; font-size: 12px; font-weight: 600; color: #6b7280; margin-bottom: 4px;
}
.portal-signature-name-input {
    width: 100%; padding: 10px 14px; border: 1px solid #d1d5db;
    border-radius: 8px; font-size: 14px; color: #1a1a2e; background: #fff; font-family: inherit;
}
.portal-signature-name-input:focus {
    outline: none; border-color: #F97316; box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
}
.portal-signature-btns { display: flex; gap: 8px; }
.portal-signature-display {
    text-align: center; padding: 20px 36px; border-top: 1px solid #eee;
}
.portal-signature-display img { max-width: 300px; max-height: 150px; border: 1px solid #eee; border-radius: 8px; padding: 8px; background: #fafafa; }
.portal-signature-display p { margin: 10px 0 0; font-size: 12px; color: #6b7280; }

/* Animation */
@keyframes portalFadeUp {
    from { opacity: 0; transform: translateY(16px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Responsive */
@media (max-width: 768px) {
    .portal-quote-paper { border-radius: 12px; }
    .pq-top-section { flex-direction: column; padding: 20px 16px; }
    .pq-logo-area { flex: none; }
    .pq-client-row { flex-direction: column; gap: 8px; }
    .pq-details-row { flex-wrap: wrap; padding: 12px 16px; }
    .pq-detail { flex: 0 0 48%; }
    .pq-items-section, .pq-notes-section, .pq-bank-section,
    .pq-terms-section, .pq-total-section, .portal-signature-section,
    .portal-signature-display { padding-left: 16px; padding-right: 16px; }
    .pq-bank-grid { grid-template-columns: 1fr; }
    .pq-terms-grid { grid-template-columns: 1fr; }
    .pq-footer { flex-direction: column; gap: 8px; text-align: center; padding: 12px 16px; border-radius: 0 0 12px 12px; }
    .portal-signature-controls { flex-direction: column; }
    .portal-quote-detail-actions { flex-direction: column; gap: 10px; }
    .portal-quotes-page { padding: 16px; }
}
